<!DOCTYPE html>
<html lang="en">
 <link rel="stylesheet" href="styles.css" />
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hambana‚ÄØCaf√© Menu</title>

  <!-- ‚ñ∫‚ñ∫ Inline CSS ‚óÑ‚óÑ -->
  <style>
    /* Basic RTL support */

  </style>
</head>

<body>
<div class="menu-box">
<header>
  <h1 id="appName" class="appName" style="font-size:50px;"></h1>
  <h3 id="tagline" class="tagline"></h3>

  <select id="langSelect" title="Choose language"></select>
  <button id="adminBtn"  style="display:none;">Admin</button>
  <button id="logoutBtn" style="display:none;">Logout</button>
</header>

<!-- ‚ñ∫ Admin panel right after header so it‚Äôs always near the top ‚óÑ -->
<div id="adminPanel" style="display:none;">
  <h3 id="adminTitle" style="margin:0.5rem 0;">Admin Panel</h3>
  <form id="addItemForm">
    <input type="text"  class="lang-name" id="itemName_en" placeholder="Name (English)"  required />
    <input type="text"  class="lang-name" id="itemName_ar" placeholder="ÿßŸÑÿßÿ≥ŸÖ (Arabic)"  required />
    <input type="text"  class="lang-name" id="itemName_ku" placeholder="ŸÜÿßŸà (Kurdish)"   required />

    <input type="number" id="itemPrice"    placeholder="Price"    required step="0.01" min="0" />
    <select id="itemCategory" required>
      <option value="coffee">Coffee</option>
      <option value="icedcoffee">Iced‚ÄØCoffee</option>
      <option value="tea">Tea</option>
      <option value="drinks">Drinks</option>
      <option value="freshjuice">Fresh‚ÄØJuice</option>
      <option value="desserts">Desserts</option>
      <option value="snacks">Snacks</option>
    </select>

    <button type="submit" id="saveBtn">Add</button>
  </form>
</div>

<div id="filterButtons"></div>
<div id="menuContainer"></div>

<footer style="text-align:center;margin-top:2rem;"><small id="footerName"></small></footer>

<!-- Template for a single menu line -->
<template id="itemTpl">
  <div class="menu-item">
    <div class="item-name"></div>
    <div class="price"></div>
    <div class="actions" style="display:none;">
      <button type="button" class="editBtn"   title="Edit">‚úèÔ∏è</button>
      <button type="button" class="deleteBtn" title="Delete">üóëÔ∏è</button>
    </div>
  </div>
</template>
</div>
<!-- ‚ñ∫‚ñ∫ Inline JavaScript ‚óÑ‚óÑ -->
<script>
(function () {
/* ========= Data & i18n ========= */
const STORAGE_KEY = 'haryadMenu';
const defaultItems = [
  { id: 1,  cat: 'coffee',      names: { en: 'Espresso',     ar: 'ÿ•ÿ≥ÿ®ÿ±Ÿäÿ≥Ÿà',          ku: 'ÿ¶€ïÿ≥Ÿæÿ±€éÿ≥Ÿà' },        price: 2000 },
  { id: 2,  cat: 'coffee',      names: { en: 'Arabica coffee',   ar: 'ŸÇŸáŸàÿ© ÿπÿ±ÿ®Ÿäÿ©',         ku: 'ŸÇÿßŸà€ï€å ÿπ€ïÿ±€ïÿ®€å' },        price: 1500 },
  { id: 3,  cat: 'coffee',      names: { en: 'Kurdish coffee',        ar: 'ÿßŸÑŸÇŸáŸàÿ© ŸÇÿ≤ŸàÿßŸÜ ',            ku: 'ŸÇÿßŸà€ï€å ŸÇ€ïÿ≤ŸàÿßŸÜ' },             price: 1500 },
  { id: 4,  cat: 'coffee',  names: { en: 'Americano',   ar: 'ÿ£ŸÖÿ±ŸäŸÉÿßŸÜŸà',      ku: 'ÿ¶€ïŸÖÿ±€å⁄©ÿßŸÜ€Ü' },       price: 3000 },
  { id: 5,  cat: 'coffee',         names: { en: 'mocha',    ar: 'ŸÖŸàŸÉÿß',         ku: ' ŸÖ€Ü⁄©ÿß' },          price: 3500 },
  { id: 6,  cat: 'coffee',  names: { en: 'Latte macchiato', ar: 'ŸÑÿßÿ™ŸäŸá ŸÖÿßŸÉŸäÿßÿ™Ÿà',      ku: 'ŸÑÿßÿ™€é ŸÖÿß⁄©€åÿ™€Ü' }, price: 3500 },
  { id: 7,  cat: 'coffee',      names: { en: 'Cappuccino',    ar:'ŸÉÿßÿ®ÿ™ÿ¥ŸäŸÜŸà',        ku: '⁄©ÿßŸæŸà⁄Ü€åŸÜ€Ü' },         price: 3000 },
  { id: 8,  cat: 'coffee',      names: { en: 'Flat white',ar:'ŸÅŸÑÿßÿ™ ŸàÿßŸäÿ™', ku: 'ŸÅŸÑÿßÿ™ ŸàÿßŸäÿ™' },   price: 2500 },
  { id: 9,  cat: 'coffee',      names: { en: 'Nescaf√©' ,  ar:'ŸÜÿ≥ŸÉÿßŸÅŸäŸá',  ku: 'ŸÜÿ≥ŸÉÿßŸÅ€ï' },     price: 2000 },
  { id: 10, cat: 'coffee',    names: { en: 'Hot Chocolate ', ar:' ÿ¥ŸàŸÉŸàŸÑÿßÿ™ÿ© ÿ≥ÿßÿÆŸÜÿ©',    ku: 'ÿ¥Ÿà⁄©ŸÑÿßÿ™€ï€å ⁄Ø€ïÿ±ŸÖ' },      price: 2500 },
  { id: 11, cat: 'coffee',    names: { en: 'Milk',        ar:'ÿ≠ŸÑŸäÿ®',           ku: 'ÿ¥€åÿ±' },           price: 1000 },
  { id: 12, cat: 'coffee',    names: { en: 'Honey & Milk',        ar:' ÿ≠ŸÑŸäÿ® ŸàÿßŸÑÿπÿ≥ŸÑ',           ku: 'ÿ¥€åÿ± Ÿà Ÿá€ïŸÜ⁄ØŸà€åŸÜ' },           price: 2000 },
  { id: 13,  cat: 'icedcoffee',      names: { en: 'Iced coffee',     ar: '⁄©ŸàŸÅ€å ÿßŸÑŸÖÿ´ŸÑÿ¨',          ku: 'ÿ¶ÿß€åÿ≥ ⁄©€ÜŸÅ€å' },        price: 3500 },
  { id: 14,  cat: 'icedcoffee',      names: { en: 'Iced latte',   ar: 'ŸÑÿßÿ™ŸäŸá ÿßŸÑŸÖÿ´ŸÑÿ¨',         ku: 'ÿ¶ÿß€åÿ≥ ŸÑÿßÿ™€é' },        price: 3500 },
  { id: 15,  cat: 'icedcoffee',      names: { en: 'Iced americano',        ar: ' ÿ£ŸÖÿ±ŸäŸÉÿßŸÜŸà ÿßŸÑŸÖÿ´ŸÑÿ¨',            ku: 'ÿ¶ÿß€åÿ≥ ÿ¶€ïŸÖÿ±€å⁄©ÿßŸÜ€Ü' },             price: 3000 },
  { id: 16,  cat: 'icedcoffee',  names: { en: 'Frappe',   ar: 'ŸÅÿ±ÿßÿ®€å',      ku: 'ŸÅÿ±ÿßŸæ€é' },       price: 4000 },
  { id: 17,  cat: 'icedcoffee',         names: { en: 'Iced mocha',    ar: 'ŸÖŸàŸÉÿß ÿßŸÑŸÖÿ´ŸÑÿ¨',         ku: ' ÿ¶ÿß€åÿ≥ ŸÖ€Ü⁄©ÿß' },          price: 3500 },
  { id: 18,  cat: 'icedcoffee',  names: { en: 'Iced cappuccino', ar: 'ŸÉÿßÿ®ÿ™ÿ¥ŸäŸÜŸà ÿßŸÑŸÖÿ´ŸÑÿ¨',      ku: 'ÿ¶ÿß€åÿ≥ ⁄©ÿßŸæŸà⁄Ü€åŸÜ€Ü' }, price: 3500 },
  { id: 19,  cat: 'icedcoffee',      names: { en: 'Iced caramel macchiato',    ar:'ŸÉÿ±ÿßŸÖŸäŸÑ ŸÖÿßŸÉŸäÿßÿ™Ÿà ÿßŸÑŸÖÿ´ŸÑÿ¨',        ku: 'ÿ¶ÿß€åÿ≥ ⁄©ÿßÿ±ÿßŸÖ€é⁄µ€å' },         price: 4000 },
  { id: 20,  cat: 'icedcoffee',      names: { en: 'Iced Flat white',ar:' ŸÅŸÑÿßÿ™ ŸàÿßŸäÿ™ ÿßŸÑŸÖÿ´ŸÑÿ¨', ku: ' ÿ¶ÿß€åÿ≥ ŸÅŸÑÿßÿ™ ŸàÿßŸäÿ™' },   price: 3000 },
  { id: 21, cat: 'tea',    names: { en: 'Tea',        ar:'ÿ¥ÿß€å',           ku: '⁄Üÿß' },           price: 500 },
  { id: 22, cat: 'tea',    names: { en: 'Green tea',        ar:' ÿ¥ÿßŸä ÿ£ÿÆÿ∂ÿ±',           ku: '⁄Üÿß€å ÿ≥€ïŸàÿ≤' },           price: 500 },
  { id: 23,  cat: 'tea',      names: { en: 'Milk & tea',     ar: 'ÿ¥ÿßŸä ÿ®ÿ≠ŸÑŸäÿ®',          ku: 'ÿ¥€åÿ±Ÿà ⁄Üÿß' },        price: 1000 },
  { id: 24,  cat: 'tea',      names: { en: 'Lemon tea',   ar: 'ÿ¥ÿßŸä ÿ®ÿßŸÑŸÑŸäŸÖŸàŸÜ',         ku: '⁄Üÿß€å ŸÑ€åŸÖ€Ü' },        price: 500 },
  { id: 25,  cat: 'tea',      names: { en: 'Ginger tea',        ar: 'ÿ¥ÿßŸä ÿßŸÑÿ≤ŸÜÿ¨ÿ®ŸäŸÑ',            ku: '⁄Üÿß€å ÿ≤€ïŸÜÿ¨€ïÿ®€åŸÑ' },       price: 500 },
  { id: 26,  cat: 'tea',  names: { en: 'Baibun tea',   ar: 'ÿ¥ÿß€å ÿ®ÿßÿ®ŸàŸÜÿ¨',      ku: '⁄Üÿß€å ⁄ØŸà⁄µ€ïÿ®€ï€åÿ®ŸàŸÜ' },       price: 500 },
  { id: 27,  cat: 'tea',         names: { en: 'Mint herbal tea',    ar: 'ÿ¥ÿßŸä ÿßŸÑŸÜÿπŸÜÿßÿπ',         ku: ' ⁄Üÿß€å ŸÜ€ïÿπŸÜÿß' },          price: 500 },
  { id: 28,  cat: 'tea',  names: { en: 'Pomegranate tea', ar: 'ÿ¥ÿß€å ÿ±ŸàŸÖÿßŸÜ',      ku: '⁄Üÿß€å Ÿá€ïŸÜÿßÿ±' }, price: 500 },
  { id: 29,  cat: 'tea',      names: { en: 'Matcha tea',    ar:'ÿ¥ÿß€å ŸÖÿßÿ™ÿ¥ÿß',        ku: '⁄Üÿß€å ŸÖÿß⁄Üÿß' },         price: 500 },
  { id: 30,  cat: 'drinks',      names: { en: 'Water',ar:' ŸÖÿßÿ°', ku: ' ÿ¶ÿßŸà' },   price: 250 },
  { id: 31, cat: 'drinks',    names: { en: 'Cola',        ar:'ŸÉŸàŸÑÿß',           ku: '⁄©€ÜŸÑÿß' },           price: 500 },
  { id: 32, cat: 'drinks',    names: { en: 'Dew',        ar:' ÿØ€åŸà',           ku: 'ÿØ€åŸà' },           price: 500 },
  { id: 33,  cat: 'drinks',      names: { en: 'Pepsi',     ar: 'ÿ®Ÿäÿ®ÿ≥Ÿä',          ku: 'Ÿæ€éŸæÿ≥€å' },        price: 500 },
  { id: 34,  cat: 'drinks',      names: { en: 'Mission',   ar: 'ŸÖÿ¥ŸÜ',         ku: 'ŸÖÿ¥ŸÜ' },        price: 750 },
  { id: 35,  cat: 'drinks',      names: { en: 'Tiger',        ar: 'ÿ™ÿß€åÿ¨ÿ±',            ku: 'ÿ™ÿß€å⁄Ø€ïÿ±' },       price: 1000 },
  { id: 36,  cat: 'drinks',  names: { en: 'Vinut',   ar: 'ŸÅ€åŸÜŸàÿ™',      ku: '⁄§€åŸÜ€Üÿ™' },       price: 1000 },
  { id: 37,  cat: 'drinks',         names: { en: 'Istak',    ar: 'ÿß€åÿ≥ÿ™⁄©',         ku: ' ÿ¶€åÿ≥ÿ™€ï⁄©' },          price: 1000 },
  { id: 38,  cat: 'drinks',  names: { en: 'Freez', ar: 'ŸÅÿ±€åÿ≤',      ku: 'ŸÅÿ±€åÿ≤' }, price: 1500 },
  { id: 39,  cat: 'drinks',      names: { en: 'Lemonat',    ar:'ŸÑ€åŸÖŸàŸÜÿßÿ™',        ku: 'ŸÑ€åŸÖ€ÜŸÜÿßÿ™' },         price: 750 },
  { id: 40,  cat: 'drinks',      names: { en: 'Ayran',ar:' ÿπŸäÿ±ÿßŸÜ', ku: ' ÿØ€Ü' },   price: 1000  },
  { id: 41,  cat: 'freshjuice',      names: { en: 'Orange',        ar: 'ÿ®ÿ±ÿ™ŸÇÿßŸÑ',            ku: 'Ÿæÿ±ÿ™€ïŸÇÿß⁄µ' },       price: 2000 },
  { id: 42,  cat: 'freshjuice',  names: { en: 'Banana milk',   ar: 'ÿ≠ŸÑŸäÿ® ÿ®ŸÜŸÉŸáÿ© ÿßŸÑŸÖŸàÿ≤',      ku: 'ÿ¥€åÿ± ŸÖ€Üÿ≤' },       price: 2000 },
  { id: 43,  cat: 'freshjuice',         names: { en: 'Orange Lemonade',    ar: 'ŸÑŸäŸÖŸàŸÜ ÿ®ÿ±ÿ™ŸÇÿßŸÑ',         ku: ' ŸÑ€åŸÖ€ÜŸà Ÿæÿ±ÿ™€ïŸÇÿß⁄µ' },          price: 2000 },
  { id: 44,  cat: 'freshjuice',  names: { en: 'Maxiki', ar: 'ŸÖŸÉÿ≥ŸäŸÉŸä',      ku: 'ŸÖ€ï⁄©ÿ≥€å⁄©€å' }, price: 2000 },
  { id: 45,  cat: 'freshjuice',      names: { en: 'Mojito',    ar:'ŸÖŸàÿÆ€åÿ™Ÿà',        ku: 'ŸÖ€ÜŸá€åÿ™€Ü' },         price: 2500 },
  { id: 46,  cat: 'freshjuice',      names: { en: 'Hambana special',ar:' ŸáÿßŸÖÿ®ÿßŸÜÿß ÿÆÿßÿµ', ku: ' ÿ™ÿß€åÿ®€ïÿ™ ÿ®€ï Ÿá€ïŸÖÿ®ÿßŸÜ€ï' },   price: 3000  },
  { id: 47,  cat: 'desserts',         names: { en: 'Muhalabi',    ar: 'ŸÖÿ≠ŸÑÿ®€å',         ku: ' ŸÖÿ≠€ïŸÑ€ïÿ®€å' },          price: 1000 },
  { id: 48,  cat: 'desserts',  names: { en: 'Mix muhalabi', ar: 'ŸÖÿ≠ŸÑÿ®€å ŸÖÿ≤ÿ¨',      ku: 'ŸÖÿ≠€ïŸÑ€ïÿ®€å ÿ™€é⁄©€ï⁄µ€ï' }, price: 1500 },
  { id: 49,  cat: 'desserts',      names: { en: 'Turta',    ar:'ÿ™Ÿàÿ±ÿ™',        ku: 'ÿ™Ÿàÿ±ÿ™€ï' },         price: 1500 },
  { id: 50,  cat: 'desserts',      names: { en: 'khsh khsh',ar:' ÿÆÿ¥ ÿÆÿ¥', ku: ' ÿÆÿ¥ ÿÆÿ¥' },   price: 1500  },
  { id: 51,  cat: 'snacks',  names: { en: 'Falafel', ar: 'ŸÅŸÑÿßŸÅŸÑ',      ku: 'ŸÅ€ïŸÑÿßŸÅŸÑ' }, price: 1000 },
  { id: 52,  cat: 'snacks',      names: { en: 'Foga',    ar:'ÿØŸÑ€åŸÖ€åÿ©',        ku: 'ŸÅ€Ü⁄Ø€ï' },         price: 2000 },
  { id: 53,  cat: 'snacks',      names: { en: 'Rice and broth',ar:' ÿ™ŸÖŸÜ Ÿà ŸÖÿ±⁄©', ku: ' ÿ®ÿ±ŸÜÿ¨ Ÿà ÿ¥ŸÑ€ï€å ÿ≥ÿßÿØ€ï' },   price: 2500  },
  { id: 54,  cat: 'snacks',         names: { en: 'Chicken and rice',    ar: 'ÿ™ŸÖŸÜ Ÿà ÿØÿ¨ÿßÿ¨',         ku: ' ÿ®ÿ±ŸÜÿ¨ Ÿà ŸÖÿ±€åÿ¥⁄©' },          price: 4000 },
  { id: 55,  cat: 'snacks',  names: { en: 'Shifta', ar: 'ÿ¥ŸÅÿ™ÿ©',      ku: 'ÿ¥ŸÅÿ™€ï' }, price: 1500 },
  { id: 56,  cat: 'snacks',      names: { en: 'Fish',    ar:'ÿ≥ŸÖŸÉ',        ku: 'ŸÖÿßÿ≥€å' },         price: 3500 },
  { id: 57,  cat: 'snacks',      names: { en: 'Chickpea',ar:' ÿßŸÑÿ≠ŸÖÿµ', ku: ' ŸÜ€Ü⁄©ÿßŸà' },   price: 1500  },

];

const languages = {
  en: {
    appName: 'Hambana', tagline: 'Menu', all: 'All',
    sections:{coffee:'‚òï‚ÄØCoffee', icedcoffee:'üßä‚ÄØIced‚ÄØCoffee', tea:'üçµ‚ÄØTea',drinks:'ü•§‚ÄØDrinks',
     freshjuice:'üçπ‚ÄØFresh‚ÄØJuice',  desserts:'üç∞‚ÄØDesserts',snacks:'ü•™‚ÄØMeal'},
    admin:'Admin', logout:'Logout', adminPanel:'Admin Panel', add:'Add',
    placeholders:{name:'Name', price:'Price', category:'Category'},
    edit:'Edit', save:'Save', cancel:'Cancel'
  },
  ar: {
    appName:'ŸáÿßŸÖÿ®ÿßŸÜÿß', tagline:'ÿßŸÑŸÇÿßÿ¶ŸÖÿ©', all:'ÿßŸÑŸÉŸÑ',
    sections:{coffee:'‚òï‚ÄØŸÇŸáŸàÿ©', icedcoffee:'üßä‚ÄØŸÇŸáŸàÿ© ŸÖÿ´ŸÑÿ¨ÿ©', tea:'üçµ‚ÄØÿ¥ÿßŸä', freshjuice:'üçπ‚ÄØÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨',
              drinks:'ü•§‚ÄØŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™', snacks:'ü•™‚ÄØŸàÿ¨ÿ®ÿßÿ™', desserts:'üç∞‚ÄØÿ≠ŸÑŸàŸäÿßÿ™'},
    admin:'ÿßŸÑŸÖÿ¥ÿ±ŸÅ', logout:'ÿÆÿ±Ÿàÿ¨', adminPanel:'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ', add:'ÿ•ÿ∂ÿßŸÅÿ©',
    placeholders:{name:'ÿßŸÑÿßÿ≥ŸÖ', price:'ÿßŸÑÿ≥ÿπÿ±', category:'ÿßŸÑŸÅÿ¶ÿ©'},
    edit:'ÿ™ÿπÿØŸäŸÑ', save:'ÿ≠ŸÅÿ∏', cancel:'ÿ•ŸÑÿ∫ÿßÿ°'
  },
  ku: {
    appName:'Ÿá€ïŸÖÿ®ÿßŸÜ€ï', tagline:'ŸÑ€åÿ≥ÿ™', all:'Ÿá€ïŸÖŸàŸà',
    sections:{coffee:'‚òï ŸÇÿßŸà€ï', icedcoffee:'üßä ŸÇÿßŸà€ï€å ÿ≥ÿßÿ±ÿØ', tea:'üçµ ⁄Üÿß€å', freshjuice:'üçπÿ¥€ïÿ±ÿ®€ïÿ™€å ŸÅÿ±€éÿ¥',
              drinks:'ü•§ ÿÆŸàÿßÿ±ÿØŸÜ€ïŸà€ï⁄©ÿßŸÜ', snacks:'ü•™ ÿÆŸàÿßÿ±ÿØŸÜ', desserts:'üç∞ ÿ¥€åÿ±€åŸÜ€å'},
    admin:'ÿ®€ï⁄ï€éŸà€ïÿ®€ïÿ±', logout:'⁄ÜŸàŸàŸÜ€ïÿØ€ïÿ±€ïŸà€ï', adminPanel:'Ÿæ€ï⁄ï€ï€å ÿ®€ï⁄ï€éŸà€ïÿ®ÿ±ÿØŸÜ', add:'ÿ≤€åÿßÿØ⁄©ÿ±ÿØŸÜ',
    placeholders:{name:'ŸÜÿßŸà', price:'ŸÜÿ±ÿÆ', category:'Ÿæ€ÜŸÑ'},
    edit:'ÿØ€ïÿ≥ÿ™⁄©ÿßÿ±€å', save:'Ÿá€ï⁄µ⁄Øÿ±ÿ™ŸÜ', cancel:'Ÿá€ï⁄µŸà€ïÿ¥ÿßŸÜÿØŸÜ€ïŸà€ï'
  }
};

let currentLang   = localStorage.getItem('lang') || 'en';
let isAdmin       = false;
let currentFilter = 'all';
let editingId     = null;           // ID of item being edited

/* === DOM shortcuts === */
const langSelect     = document.getElementById('langSelect');
const adminBtn       = document.getElementById('adminBtn');
const logoutBtn      = document.getElementById('logoutBtn');
const menuContainer  = document.getElementById('menuContainer');
const itemTpl        = document.getElementById('itemTpl');
const adminPanel     = document.getElementById('adminPanel');
const addItemForm    = document.getElementById('addItemForm');
const itemPriceIn    = document.getElementById('itemPrice');
const itemCategoryIn = document.getElementById('itemCategory');
const itemNameEnIn   = document.getElementById('itemName_en');
const itemNameArIn   = document.getElementById('itemName_ar');
const itemNameKuIn   = document.getElementById('itemName_ku');

const filterButtons  = document.getElementById('filterButtons');
const appNameEl      = document.getElementById('appName');
const taglineEl      = document.getElementById('tagline');

/* === Helpers === */
const categories = ['all','coffee','icedcoffee','tea','drinks','freshjuice','desserts','snacks'];
const loadItems  = () => JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultItems;
const saveItems  = items => localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
const t          = path => path.split('.').reduce((o,k)=>o&&o[k], languages[currentLang]) || path;
const nextId     = items => items.length ? Math.max(...items.map(i=>i.id)) + 1 : 1;

/* ========= UI RENDERING ========= */
function renderFilterButtons() {
  filterButtons.innerHTML = '';
  categories.forEach(cat => {
    const btn = document.createElement('button');
    btn.dataset.cat = cat;
    btn.textContent = cat === 'all' ? t('all') : t(`sections.${cat}`);
    if (cat === currentFilter) btn.classList.add('active');
    filterButtons.appendChild(btn);
  });
}

function renderMenu() {
  menuContainer.innerHTML = '';
  const items = loadItems();
  const cats  = categories.slice(1);
  const show  = currentFilter === 'all' ? cats : [currentFilter];

  show.forEach(cat => {
    const sec = document.createElement('section');
    sec.className = 'menu-section';
    const h2 = document.createElement('h2');
    h2.textContent = t(`sections.${cat}`);
    sec.appendChild(h2);

    items.filter(i => i.cat === cat).forEach(i => {
      const node = itemTpl.content.cloneNode(true);
      const displayName = (i.names && i.names[currentLang]) || (i.names && i.names.en) || 'Unnamed';
      const container = node.querySelector('.menu-item');

      container.querySelector('.item-name').textContent = displayName;
      container.querySelector('.price').textContent = `IQD‚ÄØ${Math.round(i.price)}`;

      /* Toggle action buttons */
      const actions = container.querySelector('.actions');
      if (isAdmin) actions.style.display = 'flex';

      /* DELETE */
      actions.querySelector('.deleteBtn').onclick = () => {
        if (confirm('Delete this item?')) {
          saveItems(loadItems().filter(item => item.id !== i.id));
          renderMenu();
        }
      };

      /* EDIT */
      actions.querySelector('.editBtn').onclick = () => {
        editingId = i.id;
        itemNameEnIn.value  = i.names.en;
        itemNameArIn.value  = i.names.ar;
        itemNameKuIn.value  = i.names.ku;
        itemPriceIn.value   = i.price;
        itemCategoryIn.value = i.cat;

        document.getElementById('saveBtn').textContent = t('save');
        adminPanel.classList.add('editing');
        adminPanel.scrollIntoView({ behavior:'smooth', block:'start' });
      };

      sec.appendChild(container);
    });

    menuContainer.appendChild(sec);
  });
}

function renderUIStrings() {
  appNameEl.textContent = t('appName');
  taglineEl.textContent = t('tagline');
  adminBtn.textContent  = t('admin');
  logoutBtn.textContent = t('logout');
  document.getElementById('adminTitle').textContent = t('adminPanel');
  document.getElementById('saveBtn').textContent = editingId ? t('save') : t('add');
  itemPriceIn.placeholder = t('placeholders.price');
  /* Re‚Äërender category <option>s in current language */
  itemCategoryIn.innerHTML = '';
  ['coffee','icedcoffee','tea','freshjuice','drinks','snacks','desserts'].forEach(c => {
    const o = document.createElement('option');
    o.value = c;
    o.textContent = t(`sections.${c}`);
    itemCategoryIn.appendChild(o);
  });
  document.getElementById('footerName').textContent = t('appName');
}

function updateDirection() {
  const rtl = (currentLang === 'ar' || currentLang === 'ku');
  document.documentElement.dir = rtl ? 'rtl' : 'ltr';
  filterButtons.style.direction = rtl ? 'rtl' : 'ltr';
}

/* ========= ADMIN TOGGLE ========= */
function enableAdmin() {
  isAdmin = true;
  adminPanel.style.display = 'block';
  logoutBtn.style.display = 'inline-block';
  renderMenu();              // show edit/delete icons
}
function disableAdmin() {
  isAdmin = false;
  adminPanel.style.display = 'none';
  logoutBtn.style.display   = 'none';
  editingId = null;
  addItemForm.reset();
  adminPanel.classList.remove('editing');
  document.getElementById('saveBtn').textContent = t('add');
  renderMenu();
}

/* ========= EVENT BINDINGS ========= */
langSelect.onchange = () => {
  currentLang = langSelect.value;
  localStorage.setItem('lang', currentLang);
  renderUIStrings(); renderFilterButtons(); renderMenu(); updateDirection();
};

filterButtons.onclick = e => {
  if (e.target.tagName === 'BUTTON') {
    [...filterButtons.children].forEach(b => b.classList.remove('active'));
    e.target.classList.add('active');
    currentFilter = e.target.dataset.cat;
    renderMenu();
  }
};

addItemForm.onsubmit = e => {
  e.preventDefault();
  if (!itemNameEnIn.value.trim() || !itemNameArIn.value.trim() || !itemNameKuIn.value.trim())
    return alert('Please fill all name fields for all languages.');

  const price = parseFloat(itemPriceIn.value);
  if (isNaN(price) || price < 0) return alert(t('placeholders.price') + ' invalid');

  const items = loadItems();

  if (editingId) {
    /* update existing */
    const idx = items.findIndex(item => item.id === editingId);
    if (idx > -1) {
      items[idx] = {
        id: editingId,
        cat: itemCategoryIn.value,
        names:{ en:itemNameEnIn.value.trim(), ar:itemNameArIn.value.trim(), ku:itemNameKuIn.value.trim() },
        price
      };
    }
    editingId = null;
    adminPanel.classList.remove('editing');
    document.getElementById('saveBtn').textContent = t('add');
  } else {
    /* add new */
    items.push({
      id: nextId(items),
      cat: itemCategoryIn.value,
      names:{ en:itemNameEnIn.value.trim(), ar:itemNameArIn.value.trim(), ku:itemNameKuIn.value.trim() },
      price
    });
  }

  saveItems(items);
  addItemForm.reset();
  renderMenu();
};

logoutBtn.onclick = disableAdmin;

/* === Easter‚Äëegg tap / long‚Äëpress / key combo to enter admin mode === */
let tap = 0, timer = null;
appNameEl.onclick = () => {
  tap++; clearTimeout(timer);
  timer = setTimeout(() => tap = 0, 1000);
  if (tap === 5) { if (prompt('Enter admin password:') === 'admin123') enableAdmin(); tap = 0; }
};
let hold = null;
const startHold = () => { hold = setTimeout(()=>{ if (prompt('Enter admin password:')==='admin123') enableAdmin(); },2000); };
const stopHold  = () => clearTimeout(hold);
['mousedown','touchstart'].forEach(ev => taglineEl.addEventListener(ev,startHold));
['mouseup','mouseleave','touchend','touchcancel'].forEach(ev => taglineEl.addEventListener(ev,stopHold));
document.addEventListener('keydown', e=>{
  if (e.ctrlKey && e.shiftKey && e.key.toLowerCase()==='a')
    if (prompt('Enter admin password:')==='admin123') enableAdmin();
});

/* ========= INITIAL RENDER ========= */
renderLangOptions();
renderUIStrings();
renderFilterButtons();
renderMenu();
updateDirection();

function renderLangOptions(){
  langSelect.innerHTML='';
  Object.keys(languages).forEach(k=>{
    const o=document.createElement('option');
    o.value=k; o.textContent=k.toUpperCase();
    if (k===currentLang) o.selected=true;
    langSelect.appendChild(o);
  });
}

})();
</script>

</body>
</html>
